import{R as w,r as i,u as C,j as e,B as b,L as M}from"./index-BqcbhNL1.js";import{C as _,a as B,b as F,c as H,d as J}from"./card-ACpWyDDp.js";import{B as f}from"./button-CGFwjxid.js";import{u as h,s as L,d as z}from"./use-fetch-D_q34TZd.js";import{c as u}from"./createLucideIcon-BJVc4PKY.js";import{M as E}from"./map-pin-IC21FOTP.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=u("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),A=({job:s,isMyJob:c=!1,savedInit:j=!1,onJobSaved:t=()=>{}})=>{var m,p;const[n,y]=i.useState(j),{user:o}=C(),{fn:d,data:a,loading:l}=h(L,{alreadySaved:n}),{fn:x,loading:r}=h(z,{job_id:s.id}),g=i.useCallback(async()=>{l||(await d({user_id:o.id,job_id:s.id}),t())},[l,d,o.id,s.id,t]),N=i.useCallback(async()=>{r||(await x(),t())},[r,x,t]);i.useEffect(()=>{a!==void 0&&y((a==null?void 0:a.length)>0)},[a]);const k=l||r,v=((m=s.description)==null?void 0:m.split(".")[0])||"";return e.jsxs(_,{className:"flex flex-col h-full min-h-[380px] justify-between p-4",children:[k&&e.jsx(b,{className:"mt-4",width:"100%",color:"#36d7b7"}),e.jsx(B,{className:"relative px-4 pt-4 pb-2 min-h-[64px]",children:e.jsxs(F,{className:"flex justify-between items-start w-full gap-4",children:[e.jsx("span",{className:"text-lg font-semibold line-clamp-2 leading-tight",children:s.title}),c&&e.jsx(T,{fill:"red",size:20,className:"text-red-300 cursor-pointer absolute top-2 right-2",onClick:N})]})}),e.jsxs(H,{className:"flex flex-col px-4 gap-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center min-h-[36px]",children:[(p=s.company)!=null&&p.logo_url?e.jsx("img",{src:s.company.logo_url,alt:"logo",className:"h-8 max-w-[100px] object-contain"}):e.jsx("div",{className:"h-8 w-[100px]"}),e.jsxs("div",{className:"flex gap-2 items-center text-sm text-muted-foreground",children:[e.jsx(E,{size:15})," ",s.country]})]}),e.jsx("hr",{}),e.jsx("p",{className:"text-base text-muted-foreground line-clamp-5 min-h-[90px]",children:v})]}),e.jsxs(J,{className:"flex gap-2 px-4 py-4 mt-auto",children:[e.jsx(M,{to:`/job/${s.id}`,className:"flex-1",children:e.jsx(f,{variant:"secondary",className:"w-full",children:"More Details"})}),!c&&e.jsx(f,{variant:"outline",className:"w-15",onClick:g,disabled:l,children:e.jsx(R,{size:20,stroke:"red",fill:n?"red":"none"})})]})]})},U=w.memo(A);export{U as J};
