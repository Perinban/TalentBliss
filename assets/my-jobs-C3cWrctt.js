import{u as p,r as n,j as e,B as g}from"./index-DK_t8YiK.js";import{g as v,A as C}from"./application-card-CNKwb7u8.js";import{u as N,c as J}from"./use-fetch-C2fnwOC5.js";import{H as M}from"./heart-crack-CyoaP4ly.js";import{J as w}from"./job-card-CANjxBnw.js";import{B as j}from"./button-DLqBWAZ-.js";import{u as A}from"./use-debounce-SMQg2lAp.js";import"./card-BO-Eh2Vp.js";import"./Combination-B1RZ_67j.js";import"./floating-ui.dom-CGtuGdiq.js";import"./createLucideIcon-C0Dvjfx9.js";import"./briefcase-business-dwS9QnhD.js";import"./map-pin-B8mFt-Oh.js";const P=()=>{const{user:r}=p(),{loading:a,data:i,fn:t}=N(v,{user_id:r.id});return n.useEffect(()=>{t()},[]),a?e.jsx(g,{className:"mb-4",width:"100%",color:"#36d7b7"}):!i||i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center mt-16 text-gray-600",children:[e.jsx(M,{size:48,className:"mb-4 text-red-400"}),e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No Applications Yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The jobs you apply to will appear here."})]}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"gradient-title font-extrabold text-3xl sm:text-5xl text-center pb-8",children:"My Applications"}),i.map(o=>e.jsx(C,{application:o,isCandidate:!0},o.id))]})},u=9,S=()=>{const{user:r}=p(),[a,i]=n.useState(""),[t,o]=n.useState(1),l=A(a,500),{loading:c,data:d,fn:f}=N(J,{recruiter_id:r.id,searchQuery:l,page:t,limit:u}),h=n.useMemo(()=>(d==null?void 0:d.filter(s=>s.title.toLowerCase().includes(l.toLowerCase())))||[],[d,l]),b=t*u,y=b-u,m=h.slice(y,b),x=Math.ceil(h.length/u);return n.useEffect(()=>{f()},[t,l]),e.jsxs("div",{children:[e.jsx("h1",{className:"gradient-title font-extrabold text-3xl sm:text-5xl text-center pb-8",children:"My Jobs"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search jobs by title...",value:a,onChange:s=>i(s.target.value),className:"w-full p-4 rounded-lg border border-gray-300 shadow-xl focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-500 text-lg transition duration-300 ease-in-out"})}),c?e.jsx(g,{className:"mt-4",width:"100%",color:"#36d7b7"}):e.jsx("div",{children:e.jsx("div",{className:"mt-8 grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:m!=null&&m.length?m.map(s=>e.jsx(w,{job:s,onJobSaved:f,isMyJob:!0},s.id)):e.jsx("div",{className:"text-center text-gray-600 font-semibold mt-2",children:e.jsx("span",{className:"text-lg",children:"No Jobs Found. Try refining your search."})})})}),x>1&&e.jsxs("div",{className:"flex justify-center mt-8 gap-4 mb-8",children:[e.jsx(j,{onClick:()=>o(s=>Math.max(s-1,1)),disabled:t===1,className:"sm:w-auto",children:"Previous"}),e.jsxs("span",{className:"text-center mt-2",children:["Page ",t," of ",x]}),e.jsx(j,{onClick:()=>o(s=>Math.min(s+1,x)),disabled:t===x,className:"sm:w-auto",children:"Next"})]})]})},R=()=>{const{user:r,isLoaded:a,isSignedIn:i,error:t}=p(),o=n.useMemo(()=>{var c;return a?(c=r==null?void 0:r.unsafeMetadata)==null?void 0:c.role:null},[a,r]);return a?t?e.jsx("div",{className:"text-center text-red-500",children:e.jsx("p",{children:"Error loading user data. Please try again later."})}):e.jsx("div",{children:o==="candidate"?e.jsx(P,{}):e.jsx(S,{})}):e.jsx(g,{className:"mb-4",width:"100%",color:"#36d7b7"})};export{R as default};
