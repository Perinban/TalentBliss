import{R as w,r as i,u as C,j as e,L as b}from"./index-Bsb9sFU-.js";import{C as k,a as M,b as _,c as B,d as F}from"./card-CeEA0h31.js";import{B as f}from"./button-IGYetEx4.js";import{u as h,s as H,d as J}from"./use-fetch-CTMZA0u9.js";import{B as L}from"./BarLoader-ZAzCe0NP.js";import{c as z}from"./createLucideIcon-Co8pCidC.js";import{M as E}from"./map-pin-Cegbw6Vb.js";import{H as R}from"./heart-CHiiwSaf.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),D=({job:s,isMyJob:n=!1,savedInit:u=!1,onJobSaved:t=()=>{}})=>{var x,p;const[c,j]=i.useState(u),{user:o}=C(),{fn:d,data:a,loading:l}=h(H,{alreadySaved:c}),{fn:m,loading:r}=h(J,{job_id:s.id}),g=i.useCallback(async()=>{l||(await d({user_id:o.id,job_id:s.id}),t())},[l,d,o.id,s.id,t]),y=i.useCallback(async()=>{r||(await m(),t())},[r,m,t]);i.useEffect(()=>{a!==void 0&&j((a==null?void 0:a.length)>0)},[a]);const N=l||r,v=((x=s.description)==null?void 0:x.split(".")[0])||"";return e.jsxs(k,{className:"flex flex-col h-full min-h-[380px] justify-between p-4",children:[N&&e.jsx(L,{className:"mt-4",width:"100%",color:"#36d7b7"}),e.jsx(M,{className:"relative px-4 pt-4 pb-2 min-h-[64px]",children:e.jsxs(_,{className:"flex justify-between items-start w-full gap-4",children:[e.jsx("span",{className:"text-lg font-semibold line-clamp-2 leading-tight",children:s.title}),n&&e.jsx(T,{fill:"red",size:20,className:"text-red-300 cursor-pointer absolute top-2 right-2",onClick:y})]})}),e.jsxs(B,{className:"flex flex-col px-4 gap-4 flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-center min-h-[36px]",children:[(p=s.company)!=null&&p.logo_url?e.jsx("img",{src:s.company.logo_url,alt:"logo",className:"h-8 max-w-[100px] object-contain"}):e.jsx("div",{className:"h-8 w-[100px]"}),e.jsxs("div",{className:"flex gap-2 items-center text-sm text-muted-foreground",children:[e.jsx(E,{size:15})," ",s.country]})]}),e.jsx("hr",{}),e.jsx("p",{className:"text-base text-muted-foreground line-clamp-5 min-h-[90px]",children:v})]}),e.jsxs(F,{className:"flex gap-2 px-4 py-4 mt-auto",children:[e.jsx(b,{to:`/job/${s.id}`,className:"flex-1",children:e.jsx(f,{variant:"secondary",className:"w-full",children:"More Details"})}),!n&&e.jsx(f,{variant:"outline",className:"w-15",onClick:g,disabled:l,children:e.jsx(R,{size:20,stroke:"red",fill:c?"red":"none"})})]})]})},G=w.memo(D);export{G as J};
