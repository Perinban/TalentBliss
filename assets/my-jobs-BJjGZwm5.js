import{u as p,r as n,j as e}from"./index-DVjQTTpv.js";import{g as v,A as C}from"./application-card-BCH7ZZqU.js";import{u as N,c as J}from"./use-fetch-c4g5qgqN.js";import{B as g}from"./BarLoader-yqso4ngo.js";import{J as M}from"./job-card-CUY_IiPM.js";import{B as j}from"./button-7_6LWcrw.js";import{u as w}from"./use-debounce-ovAsLAwW.js";import"./card-DII8VRRk.js";import"./Combination-BHJGumSG.js";import"./floating-ui.dom-CGtuGdiq.js";import"./createLucideIcon-B9EFhvcD.js";import"./briefcase-business-Dse-VSVx.js";import"./map-pin-CVpoJ0yo.js";import"./heart-46uwpHlJ.js";const P=()=>{const{user:r}=p(),{loading:a,data:i,fn:s}=N(v,{user_id:r.id});return n.useEffect(()=>{s()},[]),a?e.jsx(g,{className:"mb-4",width:"100%",color:"#36d7b7"}):e.jsx("div",{className:"flex flex-col gap-2",children:i==null?void 0:i.map(o=>e.jsx(C,{application:o,isCandidate:!0},o.id))})},x=9,A=()=>{const{user:r}=p(),[a,i]=n.useState(""),[s,o]=n.useState(1),d=w(a,500),{loading:c,data:l,fn:f}=N(J,{recruiter_id:r.id,searchQuery:d,page:s,limit:x}),h=n.useMemo(()=>(l==null?void 0:l.filter(t=>t.title.toLowerCase().includes(d.toLowerCase())))||[],[l,d]),b=s*x,y=b-x,u=h.slice(y,b),m=Math.ceil(h.length/x);return n.useEffect(()=>{f()},[s,d]),e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search jobs by title...",value:a,onChange:t=>i(t.target.value),className:"w-full p-4 rounded-lg border border-gray-300 shadow-xl focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:border-indigo-500 text-lg transition duration-300 ease-in-out"})}),c?e.jsx(g,{className:"mt-4",width:"100%",color:"#36d7b7"}):e.jsx("div",{children:e.jsx("div",{className:"mt-8 grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:u!=null&&u.length?u.map(t=>e.jsx(M,{job:t,onJobSaved:f,isMyJob:!0},t.id)):e.jsx("div",{children:"No Jobs Found ðŸ˜¢"})})}),m>1&&e.jsxs("div",{className:"flex justify-center mt-8 gap-4 mb-8",children:[e.jsx(j,{onClick:()=>o(t=>Math.max(t-1,1)),disabled:s===1,className:"sm:w-auto",children:"Previous"}),e.jsxs("span",{className:"text-center mt-2",children:["Page ",s," of ",m]}),e.jsx(j,{onClick:()=>o(t=>Math.min(t+1,m)),disabled:s===m,className:"sm:w-auto",children:"Next"})]})]})},z=()=>{const{user:r,isLoaded:a,isSignedIn:i,error:s}=p(),o=n.useMemo(()=>{var c;return a?(c=r==null?void 0:r.unsafeMetadata)==null?void 0:c.role:null},[a,r]);return a?s?e.jsx("div",{className:"text-center text-red-500",children:e.jsx("p",{children:"Error loading user data. Please try again later."})}):e.jsxs("div",{children:[e.jsx("h1",{className:"gradient-title font-extrabold text-3xl sm:text-5xl text-center pb-8",children:o==="candidate"?"My Applications":"My Jobs"}),o==="candidate"?e.jsx(P,{}):e.jsx(A,{})]}):e.jsx(g,{className:"mb-4",width:"100%",color:"#36d7b7"})};export{z as default};
